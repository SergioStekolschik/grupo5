<%- include('../partials/header_con_slider') %>
    <main class="main container item-main">
        <section class="item">
            <picture class="item__img card-item__cover">
                <img id="front" class="card-item__img--front" src="../../img<%= item.image_front %>" alt="<%= item.product_description %>">
                <img id="back" class="card-item__img--back" src="../../img<%= item.image_back %>" alt="<%= item.product_description %>">
            </picture>
            <article class="item__info">
                <p id="licence_name" class="item__licence"><%= item.licence_name %></p>
                <h3 id="product_name" class="item__name"><%= item.product_name %></h3>
                <p class="item__description"><%= item.product_description %></p>
                <p id="price" class="item__price"><%= item.price %></p>
                <div class="item__cart">
                    <button id="subtract" class="item__quantity" type="button">-</button>
                    <input id="quantity" class="item__input" type="text" name="quantity" placeholder="0">
                    <button id="add" class="item__quantity" type="button">+</button>
                    <button class="item__submit btn btn--primary btn--medium" onclick="javascript:agregar();">Agregar al carrito</button>
                </div>
                <p class="item__promo"><a href="">Ver m&eacute;todos de pago</a> - <%= item.dues %> Cuotas sin inter&eacute;s</p>
            </article>
        </section>
        <section class="slider container glide">
            <h2 class="slider__title">&Uacute;ltimos lanzamientos</h2>
            <div class="glide__track" data-glide-el="track">
                <ul class="slider__items glide__slides">
                    <li class="slider__item glide__slide">
                        <article class="card-item">
                            <a class="card-item__link" href="#">
                                <picture class="card-item__cover">
                                    <span class="card-item__tag">Nuevo</span>
                                    <img class="card-item__img--front" src="../../img/star-wars/trooper-1.webp"
                                        alt="Figura coleccionable Funco de Stormtrooper de la serie Mandalorian">
                                    <img class="card-item__img--back" src="../../img/star-wars/trooper-box.webp"
                                        alt="Figura coleccionable Funco de Stormtrooper de la serie Mandalorian en caja">
                                </picture>
                                <div class="card-item__content">
                                    <p class="card-item__licence">STAR WARS</p>
                                    <h4 class="card-item__name">STORMTROOPER LIGHTSABER</h4>
                                    <p class="card-item__price">$ 1799,99</p>
                                    <p class="card-item__promo">3 CUOTAS SIN INTER&Eacute;S</p>
                                </div>
                            </a>
                        </article>
                    </li>
                    <li class="slider__item glide__slide">
                        <article class="card-item">
                            <a class="card-item__link" href="#">
                                <picture class="card-item__cover">
                                    <span class="card-item__tag">Nuevo</span>
                                    <img class="card-item__img--front" src="../../img/pokemon/pidgeotto-1.webp"
                                        alt="Figura coleccionable Funco de Pidgeotto de la serie Pokemon">
                                    <img class="card-item__img--back" src="../../img/pokemon/pidgeotto-box.webp"
                                        alt="Figura coleccionable Funco de Pidgeotto de la serie Pokemon en caja">
                                </picture>
                                <div class="card-item__content">
                                    <p class="card-item__licence">POKEMON</p>
                                    <h4 class="card-item__name">PIDGEOTTO</h4>
                                    <p class="card-item__price">$ 1799,99</p>
                                    <p class="card-item__promo">3 CUOTAS SIN INTER&Eacute;S</p>
                                </div>
                            </a>
                        </article>
                    </li>
                    <li class="slider__item glide__slide">
                        <article class="card-item">
                            <a class="card-item__link" href="#">
                                <picture class="card-item__cover">
                                    <span class="card-item__tag">Nuevo</span>
                                    <img class="card-item__img--front" src="../../img/harry-potter/luna-1.webp"
                                        alt="Figura coleccionable Funco de Luna Lovegood de la pelicula Harry Potter">
                                    <img class="card-item__img--back" src="../../img/harry-potter/luna-box.webp"
                                        alt="Figura coleccionable Funco de Luna Lovegood de la pelicula Harry Potter en caja">
                                </picture>
                                <div class="card-item__content">
                                    <p class="card-item__licence">HARRY POTTER</p>
                                    <h4 class="card-item__name">LUNA LOVEGOOD LION MASK</h4>
                                    <p class="card-item__price">$ 1799,99</p>
                                    <p class="card-item__promo">3 CUOTAS SIN INTER&Eacute;S</p>
                                </div>
                            </a>
                        </article>
                    </li>
                </ul>
            </div>
            <div class="glide__arrows" data-glide-el="controls">
                <button class="glide__arrow glide__arrow--left" data-glide-dir="<"><iconify-icon
                        icon="tabler:chevron-left"></iconify-icon></button>
                <button class="glide__arrow glide__arrow--right" data-glide-dir=">"><iconify-icon
                        icon="tabler:chevron-right"></iconify-icon></button>
            </div>
        </section>
    </main>

    <script language="JavaScript" type="text/javascript">
        function getOpening() {
            return JSON.parse(localStorage.getItem("Carrito") || "null");
        }

        function setOpening(compra) {
            localStorage.setItem("Carrito", JSON.stringify(compra));
        }

        function agregar() {
            const quantity = document.getElementById('quantity').value;
            if (quantity > 0) {
                const product_name = document.getElementById('product_name').innerText;
                const licence_name = document.getElementById('licence_name').innerText;
                const price = document.getElementById('price').innerText;
                const front = document.getElementById('front').src;
                const back = document.getElementById('back').src;

                const compra = {
                    front : front,
                    back: back,
                    product_name : product_name,
                    licence_name : licence_name,
                    price: price,
                    quantity: quantity
                };

                let localStorage = getOpening();
                if (localStorage === null) {
                    localStorage = []; 
                }
                localStorage.push(compra);
                setOpening(localStorage);
            }    
        }
    </script>

<%- include('../partials/footer_con_slider') %>